# 数据管理使用说明

本文档介绍 CarNote 的数据导出与导入功能，帮助您完成数据的备份、迁移与批量管理。

## 1. 数据导出

导出功能位于 `侧边栏 -> 设置 -> 数据管理`。

### 1.1 全量备份 (JSON)
- **用途**：用于完整的数据备份或在不同服务器间迁移。
- **格式**：JSON
- **内容**：包含您的所有车辆、能耗记录、保养记录、配件及更换记录。
- **操作**：点击 "导出全量数据" 按钮，浏览器将自动生成并下载一个带有日期标记的 `.json` 文件。

### 1.2 分类导出 (CSV)
- **用途**：用于在 Excel 或 WPS 中查看统计数据，或作为基础报表。
- **格式**：CSV
- **选项**：
  - **导出车辆**：导出当前账户下的所有车辆列表。
  - **导出能耗**：导出所有车辆的加油/充电统计。
  - **导出保养**：导出所有车辆的维保历史。

## 2. 数据导入

导入功能允许您从之前备份的文件中恢复数据。

### 2.1 导入步骤
1. 点击 "导入全量数据" 按钮。
2. 在文件选择框中选择您之前备份的 `.json` 文件。
3. **预览验证**：系统会解析文件并显示统计摘要（如识别到多少条车辆信息、多少条能耗记录）。
4. **确认导入**：核对信息无误后，点击 "确认导入"。
5. **完成**：导入成功后，页面会自动刷新。

### 2.2 导入策略
- **车辆匹配**：系统会根据“车牌号”判断车辆。如果备份文件中的车牌号在当前系统中已存在，则会将记录导入到该车辆下，而不会创建重复的车辆。
- **数据追加**：导入操作是**追加式**的，不会删除您现有的数据。
- **事务安全**：整个导入过程在一个数据库事务中执行。如果导入过程中任一环节失败（如文件损坏、网络断开），系统会自动回滚已执行的操作，确保您的数据库不会留下残缺的数据。

## 3. 注意事项
- 导入大批量数据时，请耐心等待直到出现成功提示。
- 建议定期导出数据包，以防误删或其他意外情况。
- 不要手动编辑导出的 JSON 文件，除非您非常了解其结构，否则可能导致导入失败。
